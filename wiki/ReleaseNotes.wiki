#summary eBattles Release Notes.

= Release 0.6.180 =
== Features ==
 * Added new userclass option for Match Approval: "*Match Reporter Opponent*"
  * If this option is chosen in the event admin panel, any opponent of the reporter of a match can approve the match.
 * Improved match info display.
  * Added a "magnify" icon with a link to the match details page.
  * Added an "exclamation" icon with a link to the match details page if the match is pending and the user is allowed to approve it.
 * Added avatars in match details page.
== Bug fixes ==
 * Fix bug: in "Recent Activity" menu, matches were not shown in the list because the match time was not retrieved properly.
 * Fixed typo: In User profile page, "Events" tab, "Owner" table, changed the text of the link to event manage page from "Status" to "Manage".
 * Fix title of Clan Create page.

= Release 0.6.179 =
== Features ==
 * Added table listing the event's Teams in the Event Admin page, "Event Players" tab for Team Ladders
 * Added Spanish language pack (courtesy of DelTree)
 * Added some missing strings translations.
== Bug fixes ==
 * Fix issue 67: HTML Error in Match Info
  * A "div" tag was not properly closed.
 * Fix issue 68: Plugin uninstall does not delete comments and ratings
  * Added uninstall functions purgeComments() and purgeRatings() to clean up comments/ratings during plugin uninstall
 * Fix issue 69: Wrong link in Events tab on Team Info page
  * Syntax error in link to event.
 * Fix issue 70: Event Matches counter is wrong
  * Event info match counter was counting "pending" games.
 * Fix bug: Match display function was showing a link to a wrong event.
 * Fix bug: When match approval is disable, matches status were not set to "active" automatically after submission.
 * Fix bug: "Quit Event" button is not working
 * Fix "Recent Activity" text non wrapping correctly on narrow menus.
  * Replaced non-breaking spaces by regular spaces so text can wrap.
 * Fix bug: Quick match report players drop-down list did not always show the correct players.

= Release 0.6.175 =
== Features ==
 * Added *Match Submission/Review/Approval* (Fixes issue 53)
  * Now Event admin can choose to 
   * enable/disable match approval
   * who can review/approve pending matches (Event Admin/Event Mods/No One).
  * If the feature is disabled, a match is "active" as soon as they are reported.
  * If the feature is enabled, a match will be "pending" until a reviewer approves it.
 * Added eBattles plugin disclaimer.
 * Added plugin link for main menu.
== Bug fixes ==
 * Fixed eBattles theme issue
  * When using French language, the page was blank, because the language file was required and missing.

= Release 0.6.172 =
== Features ==
 * Add support for *Team's avatar* (Fixes issue 50)
  * eBattles admin can: 
   * enable/disable Teams avatars in "Teams Standings" (Teams event info page) and "Teams list" page.
   * choose the default Team avatar
  * Team owners can choose an avatar for their team.
 * Added Admin Help Panel (with plugin logo, version and important links)
 * Improved eBattles theme news style.
== Bug fixes ==
 * Fixed "Event Name" when event is created.
  * Was using a wrong language define.
 * Fixed "Sometimes Username does not show up in the name of newly created events." (Fixes issue 66)
 * Fixed some W3C XHTML 1.1 compliance problems

= Release 0.6.167 =
== Bug fixes ==
 * Bug fix: Error in Team Events stats update was preventing Team events page to be displayed.

= Release 0.6.164 =
== Features ==
 * Multi-language support and French translation (Fixes issue 63)

= Release 0.5.161 =
== Features ==
 * Added "Check for plugin update" support for admin. (Issue 65)
  * Using [http://wiki.e107.org/?title=Eversion e_version] plugin from Father Barry
  * Now admins can check if their installation of eBattles plugin is the up-to-date directly from the plugin admin menu.
 * Added "Opponent Rating" for events players. (Issue 52)
  * Use e107 star rating system.
  * A player can now go to a match page and rate his opponents.
  * The player's Opponent Rating can be seen in the player's profile on the "Events" tab.
 * Added getClanName() function to get a clan's name/tag from the player's team id.
  * Also replaced underscore by space to separate clan tag and player's name in teams events.
== Bug fixes ==
 * Fixed bug: clan tag was displayed in matches lists for non team events.

= Release 0.5.152 =
== Features ==
 * Added support for event players management with add/kick/ban functions (Fixes issue 1 and issue 51)
  * Added new "Event Players" tab is event management page
  * "Add Player" or "Add Team" (for team events) button with a player/team drop-down selector and PM notification checkbox.
   * Note: PM notification is not yet implemented.
  * Paginated list of players with actions:
   * Ban: 
    * You can temporarily ban/unban a player.
    * A banned player can no longer play in the event or sign up to the event during the duration of the ban.
   * Delete players games
   * Delete players awards
   * Kick:
    * Admin can kick (delete) a player who has no games played and no awards.
    * A kicked player can re-signup to the event.
 * Match Info added a column to show the players "Points"
== Bug fixes ==
 * Fix: Players should be able to submit a game only if they participated in that game. (Fixes issue 61)
 * Fix: Number of games played wrong in "Recent Events", when one or more matches have been deleted from the event (Fixes issue 60)
 * Fixed bug: "Match Report" button not visible to event players (Fixes issue 59)
  * Problem: 
   * "Match Report" button should be visible to event players in the PLayer 
   * Standings tab of the event, when the event is on going.
   * This is broken for events created after release 107 when "userclass for match report" was introduced.
  * Fix: 
   * Fixed the match report userclass check
   * Set default match userclass check to "Event Player" (1) instead of 0.

= Release 0.4.147 =
== Features ==
 * Changed default image size for recent activity menu from 8 to 16 px
== Bug fixes ==
 * Fixed Avatars not showing in Event Player Standings.
  * Was broken since revision 144.
  * Fix: added global access to $pref in updateStats()
 * Fixed issue in Event stats recalculation.
  * On servers where flush() does not work, the calculation may timeout if the number of matches is great.
  * Split recalculation into batches of 10 matches to avoid timeouts.
 * Improved handling of textareas in forms. (Fixes issue 9 and issue 58)
  * There were several issues with textareas:
   * line breaks were not saved to database
   * input containing quotes may cause an error when saving data.
   * data was not properly filtered before it was saved to database, or displayed as HTML.
   * no support for BBcode.
  * Now we use the e107 functions to handle textareas.

= Release 0.4.144 =
== Features ==
 * Added an Event Stats re-calculation" in Event Manage page (Fixes issue 54)
  * This function resets players stats and awards and re-compute all stats match by match.
  * This function is helpful if the players data needs to be recalculated.
 * Added "Images max size" admin preference for "Recent Activity" menu. (Fixes issue 48)
 * For matches/awards lists, use left aligned tables, with 1 row per item.
 * Use more single quotes to output HTML text. (Issue 20)
 * Match report, prevent players of the same team to play against each other. (Fixes issue 4)
 * Added awards list in Players profiles (userinfo). (Fixes issue 16)
== Bug fixes ==
 * Fixed bug in Trueskill calculation (Fixes issue 55)
  * Problem: (reported by planettoon) The calculation of scores can be erroneous, with wrong ELO and Trueskill.
  * Cause: the erf (Gauss error function) approximation was not accurate enough
   * That lead to a negative value as the input of a square root.
   * That will interrupt the TS and scores calculation.
  * Fix: Use Rational Chebyshev Approximations for the Error Function.
 * Time/date was not handled properly (Fixes issue 56)

= Release 0.4.135 =
== Features ==
 * Added support for Matches comments using e107 comments system.
  * Show a link to matches comments in all matches lists.
  * Added support for eBattles matches comments display in user info and list_new plugin comments lists.
 * Improved Games management page.
  * Now, admin is presented with the paginated list of all the games.
  * From there, he can add/delect/update/edit one, all or selected games.
 * Added Admin configuration for eBattles links menu and Recent Activity menu.
  * eBattles links preference: Menu Heading
  * Recent Activity preferences: Menu Heading and number of items to be shown.
 * Added eBattles 32x32 icon.
 * Added poker and chess to the games list.
 * Changed time display in all matches lists.
== Bug fixes ==
 * Fixed vertical alignment issue in pagination items with Internet Explorer.

= Release 0.4.130 =
== Features ==
 * In Recent Activity menu, limit the number of recent events to show.
== Bug fixes ==
 * Cleanup HTML and CSS for W3C XHTML 1.1 compliance
 * Fixed bug in matches lists.
 In case a match is deleted, the match is still in the database, but its scores are deleted.
 So when displaying matches lists or number of matches, we need to exclude matches with no scores.

= Release 0.4.127 =
== Features ==
 * Added Avatars support for event's players standing. (Fixes issue 39)
 Site admin can choose:
   * the max size of avatars.
   * the pages where avatars will be enabled (for now only players standings)
   * default avatar, for users with no avatar.
 Added 3 default avatars.
== Bug fixes ==
 * SQL query fails for servers where decimal format is using decimal comma instead of decimal point (Europe). (Fixes issue 47)
 Added the new floatToSQL() function which formats floats before they are sent to SQL.
 * Fixed problem in matchs lists display. "defeated" or "tied" is now based on the rank of current player.
 * Fix bug in plugin upgrade.
 Now accumulate tables/prefs upgrades based on revision, instead of just taking last tables/prefs upgrades.
 * Some servers can block fopen() access to remote URLs.
 Error: "Failed to open stream: Permission Denied".
 This causes getimagesize() and thus imageResize() to return nothing.
 Work-around: in that case, imageResize() will return width=target_width.
 * Fixed height issue in "eBattles" and "Dark" tabs CSS themes
 * Fixed up/down arrow selector to sort Events list, which was not working in Internet Explorer.


= Release 0.4.123 =
== Features ==
 * New pagination system.(Fixes issue 46)
   * "Digg" style pagination
   * This class provides pagination, with drop-downs selectors for "Go to page" and "Items per page"
   * Used paginator class from http://www.catchmyfame.com/2007/07/28/finally-the-simple-pagination-class
   * Added plugin preference setting for the number of items per pages used for pagination.
 * Events list sorting

= Release 0.4.119 =
== Features ==
 * Fixed tabs default theme "height" issue.
The tab height was different for different e107 themes or on some different browsers.
== Bug fixes ==
 * The plugin installation was failing starting from revision 98. (Fixes issue 45)

= Release 0.4.116 =
== Features ==
 * "Team/Division delete" support (Fixes issue 32)
Added support to delete divisions/teams from team manage page.
Division/Team can only be deleted if there are no players who have already played in the division/team.
 * Added "Quit Division" button for members of a division in a team. (Fixes issue 44)
 * Changed plugin menus header to show info about the event or team (Fixes issue 35)
Also removed html tags `<h1`> and `<h2`> as they might appear to big for some themes.  
 * Added option for eBattles admin to resize all games images if they exceed the maximum size allowed. (Fixes issue 42)
 * Added confirmation dialog when user quits/deletes an event or a team.
== Bug fixes ==
 * eBattles moderators could not manage teams.
 * Can not reset team password when it has been set. (Fixes issue 40)

= Release 0.4.106 =
== Features ==
 * Userclass for match report (Fixes issue 36)
 Now event owner can choose who is allowed to report matches in the event.
 "Match Report userclass" 
  * Owner: Owner only can report matches
  * Moderator: Owner & Moderators can report matches
  * Player: Owner, Mods & Players can report matches
 * Quick Loss report enable/disable
 Now event owner can choose to enable or disable quick loss report in the event.
 * Change Event owner in Event Manage
 Now event owner can be changed from Event Manage page.

= Release 0.4.101 =
== Features ==
 * Players can now "quit" events if they have not played yet. (Fixes issue 31)
 * Tabs themes:
  * Changed default tabs theme to remove background so it can work with any theme
  * Added eBattles tabs theme
 * Added "Team password" support (Fixes issue 30)
 The team password is used when user tries to join a division of that team.
 * Added "Hide Ratings column" checkbox in Event manager. (Fixes issue 37)
 This is used to hide/unhide the ratings column in events standings.
 It can be useful if only one scoring category is used.
 * Added a link back to the event in eventmatchs.php
== Upgrade Notes ==
 * This release has changes in database.
 * The plugin settings will be reset when upgrading.

= Release 0.3.92 =
== Features ==
 * Add plugin preferences settings for tab theme. (Fixes issue 34)
 The site admin can now choose the tabs theme between a choice of pre-defined themes.
  * default (ebattles light color default)
  * dark
  * webfx
  * luna
  * windows classic

= Release 0.3.91 =
== Features ==
 * Add plugin preferences settings for Events/Teams creators userclasses (Fixes issue 33)
 The site admin can now decide which class of users are allowed to create teams/events